CREATE TABLE PAIS (
  IDPAIS INTEGER PRIMARY KEY,
  DESCRICAO VARCHAR NOT NULL
);

CREATE TABLE ESTATO (
  IDESTATO INTEGER PRIMARY KEY,
  IDPAIS INTEGER REFERENCES PAIS (IDPAIS),
  DESCRICAO VARCHAR NOT NULL
);

CREATE TABLE CIDADE (
  IDCIDADE INTEGER  PRIMARY KEY,
  IDESTATO INTEGER REFERENCES ESTATO (IDESTATO),
  DESCRICAO VARCHAR NOT NULL
);

CREATE TABLE AGENCIA (
  IDAGENCIA INTEGER PRIMARY KEY,
  IDCIDADE INTEGER REFERENCES CIDADE (IDCIDADE),
  NUMERO INTEGER NOT NULL
);

CREATE TABLE CONTA (
  IDCONTA INTEGER PRIMARY KEY,
  IDAGENCIA INTEGER REFERENCES AGENCIA (IDAGENCIA),
  TIPO VARCHAR(1) NOT NULL,
  NUMERO INTEGER NOT NULL
);

CREATE TABLE OPERACAO (
  IDOPERACAO INTEGER PRIMARY KEY,
  TIPO VARCHAR(1) NOT NULL,
  DESCRICAO VARCHAR NOT NULL
);

CREATE TABLE PESSOA (
  IDPESSOA INTEGER PRIMARY KEY,
  NOME VARCHAR NOT NULL,
  CPFCNPJ INTEGER  NOT NULL,
  RGIE INTEGER  NOT NULL,
  TIPO VARCHAR,
  FLAGINATIVO VARCHAR NOT NULL DEFAULT 'F'
);

CREATE TABLE PESSOA_CLIENTE (
  IDPESSOA INTEGER REFERENCES PESSOA (IDPESSOA) PRIMARY KEY,
  SITUACAO VARCHAR NOT NULL
);

CREATE TABLE PESSOA_ENDERECO (
  IDPESSOAENDERECO INTEGER PRIMARY KEY,
  IDCIDADE INTEGER REFERENCES CIDADE (IDCIDADE),
  IDPESSOA INTEGER REFERENCES PESSOA (IDPESSOA),
  ENDERECO VARCHAR NOT NULL,
  NUMERO VARCHAR NOT NULL
);

CREATE TABLE PESSOA_FUNCIONARIO (
  IDAGENCIA INTEGER REFERENCES AGENCIA (IDAGENCIA),
  IDPESSOA INTEGER REFERENCES PESSOA (IDPESSOA),
  LOGIN VARCHAR NOT NULL,
  SENHA VARCHAR NOT NULL,
  SALARIO DECIMAL NOT NULL
);

CREATE TABLE PESSOA_TELEFONE (
  IDPESSOATELEFONE INTEGER PRIMARY KEY,
  IDPESSOA INTEGER REFERENCES PESSOA (IDPESSOA),
  TELEFONE VARCHAR NOT NULL
);

CREATE TABLE TAXA (
  IDTAXA INTEGER PRIMARY KEY,
  DESCICAO VARCHAR NOT NULL,
  VALOR DECIMAL NOT NULL
);

CREATE TABLE CONTA_ANALITICA (
  IDPLANILHA INTEGER NOT NULL PRIMARY KEY,
  IDOPERACAO INTEGER REFERENCES OPERACAO (IDOPERACAO),
  IDCONTA INTEGER REFERENCES CONTA (IDCONTA),
  VALOR DECIMAL NOT NULL,
  ORIGEM VARCHAR NOT NULL
);

CREATE TABLE CONTA_PESSOA (
  IDCONTA INTEGER REFERENCES CONTA (IDCONTA),
  IDPESSOA INTEGER REFERENCES PESSOA_CLIENTE (IDPESSOA)
);

CREATE TABLE MENSAGEM (
  IDMENSAGEM INTEGER NOT NULL PRIMARY KEY,
  IDPESSOA INTEGER REFERENCES PESSOA_CLIENTE (IDPESSOA),
  TEXTO VARCHAR NOT NULL,
  FLAGLIDO VARCHAR NOT NULL DEFAULT 'F',
  DTENVIO TIMESTAMP DEFAULT NOW()
);